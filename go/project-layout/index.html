<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Project Layout（Reprint） | Skyscraper</title><link rel=stylesheet href=https://qmdx00.cn/css/eureka.min.css><script defer src=https://qmdx00.cn/js/eureka.min.js></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap" as=style onload="this.onload=null,this.rel='stylesheet'"><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/styles/solarized-light.min.css media=print onload="this.media='all',this.onload=null" crossorigin><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/highlight.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/shell.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/bash.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/go.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/rust.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/js/all.min.js integrity="sha256-uNYoXefWRqv+PsIF/OflNmwtKM4lStn9yrz2gVl6ymo=" crossorigin></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X media=print onload="this.media='all',this.onload=null" crossorigin><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script><link rel=icon type=image/png sizes=32x32 href=https://qmdx00.cn/images/icon_hufb4fe7cd637c9ae9c8e9489599ac6ef3_10837_32x32_fill_box_center_2.png><link rel=apple-touch-icon sizes=180x180 href=https://qmdx00.cn/images/icon_hufb4fe7cd637c9ae9c8e9489599ac6ef3_10837_180x180_fill_box_center_2.png><meta name=description content="转载文章，原文链接"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Golang","item":"https://qmdx00.cn/go/"},{"@type":"ListItem","position":2,"name":"Project Layout（Reprint）","item":"https://qmdx00.cn/go/project-layout/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://qmdx00.cn/go/project-layout/"},"headline":"Project Layout（Reprint） | Skyscraper","datePublished":"2021-06-29T11:18:01+08:00","dateModified":"2021-07-16T12:36:52+08:00","wordCount":2122,"publisher":{"@type":"Person","name":"Wimi","logo":{"@type":"ImageObject","url":"https://qmdx00.cn/images/icon.png"}},"description":"\u003cp\u003e\u003cem\u003e\u003cstrong\u003e转载文章，\u003ca href=\u0022https:\/\/github.com\/golang-standards\/project-layout\/blob\/master\/README_zh.md\u0022\u003e原文链接\u003c\/a\u003e\u003c\/strong\u003e\u003c\/em\u003e\u003c\/p\u003e"}</script><meta property="og:title" content="Project Layout（Reprint） | Skyscraper"><meta property="og:type" content="article"><meta property="og:image" content="https://qmdx00.cn/images/icon.png"><meta property="og:url" content="https://qmdx00.cn/go/project-layout/"><meta property="og:description" content="转载文章，原文链接"><meta property="og:locale" content="en"><meta property="og:site_name" content="Skyscraper"><meta property="article:published_time" content="2021-06-29T11:18:01+08:00"><meta property="article:modified_time" content="2021-07-16T12:36:52+08:00"><meta property="article:section" content="go"><body class="flex flex-col min-h-screen"><header class="fixed flex items-center w-full min-h-16 pl-scrollbar z-50 bg-secondary-bg shadow-sm"><div class="w-full max-w-screen-xl mx-auto"><script>let storageColorScheme=localStorage.getItem("lightDarkMode");(storageColorScheme=='Auto'&&window.matchMedia("(prefers-color-scheme: dark)").matches||storageColorScheme=="Dark")&&document.getElementsByTagName('html')[0].classList.add('dark')</script><nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0"><a href=/ class="mr-6 text-primary-text text-xl font-bold">Skyscraper</a>
<button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
<i class="fas fa-bars"></i></button><div id=target class="hidden block md:flex md:flex-grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20"><div class="md:flex md:h-16 text-sm md:flex-grow pb-4 md:pb-0 border-b md:border-b-0"><a href=/posts/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">Posts</a>
<a href=/go/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 selected-menu-item mr-4">Golang</a>
<a href=/design/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">Design Pattern</a>
<a href=/rust/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">Rust</a>
<a href=/algorithm/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">Algorithm</a>
<a href=/notes/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">Notes</a>
<a href=/collections/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">Collections</a>
<a href=https://devdocs.io/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">DevDocs</a></div><div class=flex><div class="relative pt-4 md:pt-0"><div class="cursor-pointer hover:text-eureka" id=lightDarkMode><i class="fas fa-sun"></i></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id=is-open></div><div class="absolute flex flex-col left-0 md:left-auto right-auto md:right-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id=lightDarkOptions><span class="px-4 py-1 hover:text-eureka" name=Light>Light</span>
<span class="px-4 py-1 hover:text-eureka" name=Dark>Dark</span>
<span class="px-4 py-1 hover:text-eureka" name=Auto>Auto</span></div></div></div></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id=is-open-mobile></div></nav><script>let element=document.getElementById('lightDarkMode');storageColorScheme=='Auto'?(element.firstElementChild.classList.remove('fa-sun'),element.firstElementChild.setAttribute("data-icon",'adjust'),element.firstElementChild.classList.add('fa-adjust'),document.addEventListener('DOMContentLoaded',()=>{switchMode('Auto')})):storageColorScheme=="Dark"&&(element.firstElementChild.classList.remove('fa-sun'),element.firstElementChild.setAttribute("data-icon",'moon'),element.firstElementChild.classList.add('fa-moon')),document.addEventListener('DOMContentLoaded',()=>{getcolorscheme(),switchBurger()})</script></div></header><main class="flex-grow pt-16"><div class=pl-scrollbar><div class="w-full max-w-screen-xl lg:px-4 xl:px-8 mx-auto"><div class="grid grid-cols-2 lg:grid-cols-8 gap-4 lg:pt-12"><div class="col-span-2 lg:col-span-6 bg-secondary-bg rounded px-6 py-8"><h1 class="font-bold text-3xl text-primary-text">Project Layout（Reprint）</h1><div class="flex flex-wrap flex-row items-center mt-2 text-tertiary-text"><div class="mr-6 my-2"><i class="fas fa-calendar mr-1"></i>
<span>2021-06-29</span></div><div class="mr-6 my-2"><i class="fas fa-clock mr-1"></i>
<span>5 min read</span></div><div class="mr-6 my-2"><i class="fas fa-folder mr-1"></i>
<a href=https://qmdx00.cn/categories/golang/ class=hover:text-eureka>Golang</a></div></div><div class=content><p><em><strong>转载文章，<a href=https://github.com/golang-standards/project-layout/blob/master/README_zh.md>原文链接</a></strong></em></p><p>这是 Go 应用程序项目的基本布局。它不是核心 Go 开发团队定义的官方标准；然而，它是 Go 生态系统中一组常见的老项目和新项目的布局模式。其中一些模式比其他模式更受欢迎。它还具有许多小的增强，以及对任何足够大的实际应用程序通用的几个支持目录。</p><h2 id=go-目录>Go 目录</h2><h3 id=cmd>/cmd</h3><p>本项目的主干。</p><p>每个应用程序的目录名应该与你想要的可执行文件的名称相匹配(例如，/cmd/myapp)。</p><p>不要在这个目录中放置太多代码。如果你认为代码可以导入并在其他项目中使用，那么它应该位于 /pkg 目录中。如果代码不是可重用的，或者你不希望其他人重用它，请将该代码放到 /internal 目录中。你会惊讶于别人会怎么做，所以要明确你的意图!</p><p>通常有一个小的 main 函数，从 /internal 和 /pkg 目录导入和调用代码，除此之外没有别的东西。</p><h3 id=internal>/internal</h3><p>私有应用程序和库代码。这是你不希望其他人在其应用程序或库中导入代码。请注意，这个布局模式是由 Go 编译器本身执行的。注意，你并不局限于顶级 internal 目录。在项目树的任何级别上都可以有多个内部目录。</p><p>你可以选择向 internal 包中添加一些额外的结构，以分隔共享和非共享的内部代码。这不是必需的(特别是对于较小的项目)，但是最好有有可视化的线索来显示预期的包的用途。你的实际应用程序代码可以放在 /internal/app 目录下(例如 /internal/app/myapp)，这些应用程序共享的代码可以放在 /internal/pkg 目录下(例如 /internal/pkg/myprivlib)。</p><h3 id=pkg>/pkg</h3><p>外部应用程序可以使用的库代码(例如 /pkg/mypubliclib)。其他项目会导入这些库，希望它们能正常工作，所以在这里放东西之前要三思:-) 注意，internal 目录是确保私有包不可导入的更好方法，因为它是由 Go 强制执行的。/pkg 目录仍然是一种很好的方式，可以显式地表示该目录中的代码对于其他人来说是安全使用的好方法。</p><p>当根目录包含大量非 Go 组件和目录时，这也是一种将 Go 代码分组到一个位置的方法，这使得运行各种 Go 工具变得更加容易。</p><p>如果你的应用程序项目真的很小，并且额外的嵌套并不能增加多少价值(除非你真的想要:-)，那就不要使用它。当它变得足够大时，你的根目录会变得非常繁琐时(尤其是当你有很多非 Go 应用组件时)，请考虑一下。</p><h3 id=vendor>/vendor</h3><p>应用程序依赖项(手动管理或使用你喜欢的依赖项管理工具，如新的内置 Go Modules 功能)。go mod vendor 命令将为你创建 /vendor 目录。请注意，如果未使用默认情况下处于启用状态的 Go 1.14，则可能需要在 go build 命令中添加 -mod=vendor 标志。</p><p>如果你正在构建一个库，那么不要提交你的应用程序依赖项。</p><h3 id=api>/api</h3><p>OpenAPI/Swagger 规范，JSON 模式文件，协议定义文件。</p><p>Web 应用程序目录</p><h3 id=web>/web</h3><p>特定于 Web 应用程序的组件:静态 Web 资产、服务器端模板和 SPAs。</p><p>通用应用目录</p><h3 id=configs>/configs</h3><p>配置文件模板或默认配置。</p><p>将你的 confd 或 consul-template 模板文件放在这里。</p><h3 id=init>/init</h3><p>System init（systemd，upstart，sysv）和 process manager/supervisor（runit，supervisor）配置。</p><h3 id=scripts>/scripts</h3><p>执行各种构建、安装、分析等操作的脚本。</p><p>这些脚本保持了根级别的 Makefile 变得小而简单(例如， <a href=https://github.com/hashicorp/terraform/blob/master/Makefile>https://github.com/hashicorp/terraform/blob/master/Makefile</a> )。</p><h3 id=build>/build</h3><p>打包和持续集成。</p><p>将你的云( AMI )、容器( Docker )、操作系统( deb、rpm、pkg )包配置和脚本放在 /build/package 目录下。</p><p>将你的 CI (travis、circle、drone)配置和脚本放在 /build/ci 目录中。请注意，有些 CI 工具(例如 Travis CI)对配置文件的位置非常挑剔。尝试将配置文件放在 /build/ci 目录中，将它们链接到 CI 工具期望它们的位置(如果可能的话)。</p><h3 id=deployments>/deployments</h3><p>IaaS、PaaS、系统和容器编排部署配置和模板(docker-compose、kubernetes/helm、mesos、terraform、bosh)。注意，在一些存储库中(特别是使用 kubernetes 部署的应用程序)，这个目录被称为 /deploy。</p><h3 id=test>/test</h3><p>额外的外部测试应用程序和测试数据。你可以随时根据需求构造 /test 目录。对于较大的项目，有一个数据子目录是有意义的。例如，你可以使用 /test/data 或 /test/testdata (如果你需要忽略目录中的内容)。请注意，Go 还会忽略以“.”或“_”开头的目录或文件，因此在如何命名测试数据目录方面有更大的灵活性。</p><h2 id=其他目录>其他目录</h2><h3 id=docs>/docs</h3><p>设计和用户文档(除了 godoc 生成的文档之外)。</p><h3 id=tools>/tools</h3><p>这个项目的支持工具。注意，这些工具可以从 /pkg 和 /internal 目录导入代码。</p><h3 id=examples>/examples</h3><p>你的应用程序或公共库的示例。</p><h3 id=third_party>/third_party</h3><p>外部辅助工具，分叉代码和其他第三方工具(例如 Swagger UI)。</p><h3 id=githooks>/githooks</h3><p>Git hooks。</p><h3 id=assets>/assets</h3><p>与存储库一起使用的其他资产(图像、徽标等)。</p><h3 id=website>/website</h3><p>如果你不使用 Github 页面，则在这里放置项目的网站数据。</p><h2 id=你不应该拥有的目录>你不应该拥有的目录</h2><h3 id=src>/src</h3><p>有些 Go 项目确实有一个 src 文件夹，但这通常发生在开发人员有 Java 背景，在那里它是一种常见的模式。如果可以的话，尽量不要采用这种 Java 模式。你真的不希望你的 Go 代码或 Go 项目看起来像 Java:-)</p><p>不要将项目级别 src 目录与 Go 用于其工作空间的 src 目录(如 How to Write Go Code 中所述)混淆。
<code>$GOPATH</code> 环境变量指向你的(当前)工作空间(默认情况下，它指向非 windows 系统上的 $HOME/go)。这个工作空间包括顶层 /pkg, /bin 和 /src 目录。你的实际项目最终是 /src 下的一个子目录，因此，如果你的项目中有 /src 目录，那么项目路径将是这样的: /some/path/to/workspace/src/your_project/src/your_code.go。注意，在 Go 1.11 中，可以将项目放在 GOPATH 之外，但这并不意味着使用这种布局模式是一个好主意。</p></div><div class="flex flex-col md:flex-row md:justify-between -mx-2 mt-4 px-2 pt-4 border-t"><div><span class="block font-bold">Previous</span>
<a href=https://qmdx00.cn/go/golang-learning/ class=block>Golang Learning</a></div><div class="md:text-right mt-4 md:mt-0"><span class="block font-bold">Next</span>
<a href=https://qmdx00.cn/go/golang-reflect/ class=block>Golang Reflect</a></div></div></div><div class=col-span-2><div class="sticky top-16 z-10 hidden lg:block px-6 py-4 bg-primary-bg"><span class="text-lg font-semibold">On This Page</span></div><div class="sticky-toc hidden lg:block px-6 pb-6"><nav id=TableOfContents><ul><li><a href=#go-目录>Go 目录</a><ul><li><a href=#cmd>/cmd</a></li><li><a href=#internal>/internal</a></li><li><a href=#pkg>/pkg</a></li><li><a href=#vendor>/vendor</a></li><li><a href=#api>/api</a></li><li><a href=#web>/web</a></li><li><a href=#configs>/configs</a></li><li><a href=#init>/init</a></li><li><a href=#scripts>/scripts</a></li><li><a href=#build>/build</a></li><li><a href=#deployments>/deployments</a></li><li><a href=#test>/test</a></li></ul></li><li><a href=#其他目录>其他目录</a><ul><li><a href=#docs>/docs</a></li><li><a href=#tools>/tools</a></li><li><a href=#examples>/examples</a></li><li><a href=#third_party>/third_party</a></li><li><a href=#githooks>/githooks</a></li><li><a href=#assets>/assets</a></li><li><a href=#website>/website</a></li></ul></li><li><a href=#你不应该拥有的目录>你不应该拥有的目录</a><ul><li><a href=#src>/src</a></li></ul></li></ul></nav></div><script>window.addEventListener('DOMContentLoaded',()=>{enableStickyToc()})</script></div></div><script>document.addEventListener('DOMContentLoaded',()=>{hljs.initHighlightingOnLoad()})</script></div></div></main><footer class=pl-scrollbar><div class="w-full max-w-screen-xl mx-auto"><div class="text-center p-6 pin-b"><p class="text-sm text-tertiary-text"><span>&copy; 2020 ~ 2021 <a href=https://qmdx00.cn/>Wimi</a></span> &#183;
赣ICP备20001070号-1</p></div></div></footer></body></html>